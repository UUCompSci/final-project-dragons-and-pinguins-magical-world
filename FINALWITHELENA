using System;
using System.Collections.Generic;

//animal playground aka just the enclosuure
public class Enclosure
{
    private string enclosureName;
    private List<Animal> animalSquad;

    public Enclosure(string name)
    {
        enclosureName = name;
        animalSquad = new List<Animal>();
    }

    public string Name { get { return enclosureName; } }

    public void AddAnimal(Animal critter)
    {
        animalSquad.Add(critter);
        Console.WriteLine($"{critter.Name} has joined {enclosureName}! ğŸ‰");
    }

    public void RemoveAnimal(Animal critter)
    {
        animalSquad.Remove(critter);
        Console.WriteLine($"{critter.Name} has left {enclosureName}... ğŸ˜¢");
    }

    //let the animals do their thing
    public void RunEnclosureStep()
    {
        Console.WriteLine($"\nUpdating {enclosureName}...");
        foreach (Animal critter in animalSquad)
        {
            critter.Update(); //polymorphic MAGIC
        }

        HandleShenanigans();
    }

    private void HandleShenanigans()
    {
        //placeholder for chaos between dragons and penguins
        if (animalSquad.Count > 1)
            Console.WriteLine("Some animal things are happening! ğŸ§ğŸ”¥");
    }

    public List<Animal> GetAnimals()
    {
        return animalSquad;
    }
}

//RANDOM EVENTS
public static class RandomEvents
{
    private static Random rng = new Random();

    public static void MaybeTriggerEvent(Enclosure enclosure)
    {
        int roll = rng.Next(1, 101); // Roll 1-100
        if (roll <= 10)
        {
            Console.WriteLine($"ğŸŸ Fish Frenzy hits {enclosure.Name}! Penguins are bouncing off the walls!");
        }
        else if (roll <= 15)
        {
            Console.WriteLine($"ğŸ”¥ Dragon Fire Cough in {enclosure.Name}! Watch out, penguins!");
        }
        //add more ridiculous events here
    }
}

//world manager
public class Zoo
{
    private List<Enclosure> allEnclosures;

    public Zoo()
    {
        allEnclosures = new List<Enclosure>();
    }

    public void AddEnclosure(Enclosure e)
    {
        allEnclosures.Add(e);
        Console.WriteLine($"Enclosure {e.Name} has been created! ğŸ°");
    }

    public void MoveAnimal(Animal critter, Enclosure from, Enclosure to)
    {
        from.RemoveAnimal(critter);
        to.AddAnimal(critter);
        Console.WriteLine($"{critter.Name} waddled/flew from {from.Name} to {to.Name}!");
    }

    public void AdvanceTime()
    {
        foreach (Enclosure e in allEnclosures)
        {
            e.RunEnclosureStep();
            RandomEvents.MaybeTriggerEvent(e);
        }
    }

    //database magic (placeholder)
    public void SaveZoo()
    {
        Console.WriteLine("ğŸ’¾ Saving the zoo to the mysterious database...");
    }

    public void LoadZoo()
    {
        Console.WriteLine("ğŸ“‚ Loading the zoo from the mysterious database...");
    }

    public List<Enclosure> GetEnclosures()
    {
        return allEnclosures;
    }
}

//main
public class Program
{
    static void Main(string[] args)
    {
        Zoo myZoo = new Zoo();
        bool isRunning = true;

        while (isRunning)
        {
            Console.WriteLine("\n=== ğŸ§ğŸ”¥ DRAGON & PENGUIN ZOO ğŸ‰â„ ===");
            Console.WriteLine("1. Add a new enclosure");
            Console.WriteLine("2. Add a new animal");
            Console.WriteLine("3. Move an animal");
            Console.WriteLine("4. Advance time (simulation step)");
            Console.WriteLine("5. Save the zoo");
            Console.WriteLine("6. Load the zoo");
            Console.WriteLine("7. Quit (sad face)");

            string choice = Console.ReadLine();

            switch (choice)
            {
                case "1":
                    Console.Write("Name your new enclosure: ");
                    string encName = Console.ReadLine();
                    myZoo.AddEnclosure(new Enclosure(encName));
                    break;

                case "2":
                    Console.WriteLine("ğŸš¨ Add animal here - partner handles this part!");
                    break;

                case "3":
                    Console.WriteLine("ğŸ¾ Move animal logic placeholder - select animals later.");
                    break;

                case "4":
                    myZoo.AdvanceTime();
                    break;

                case "5":
                    myZoo.SaveZoo();
                    break;

                case "6":
                    myZoo.LoadZoo();
                    break;

                case "7":
                    isRunning = false;
                    Console.WriteLine("Exiting zoo simulator. Goodbye! ğŸ§ğŸ”¥");
                    break;

                default:
                    Console.WriteLine("Oops, invalid choice. Try again! ğŸ˜…");
                    break;
            }
        }
    }
}

